{"version":3,"sources":["popps.js"],"names":[],"mappings":"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","file":"popps.min.js","sourcesContent":["const DRAG_DISTANCE_THRESHOLD = 10;\r\n\r\nvar preloading;\r\nvar canvasElement, canvas, invisibleCanvasElement, invisCanvas;\r\nvar windowWidth, windowHeight, width, height;\r\nvar looping = false, frameRate = undefined, lastFrameTime = 0, frameCount = 0;\r\nvar font = \"sans-serif\", fontSize = \"10px\";\r\nvar mouseIsDown = false, mouseX = 0, mouseY = 0;\r\nvar canvasX = 0, canvasY = 0;\r\nvar key = '', keycode = -1, keys = [], shifting = false;\r\nvar startTime;\r\nvar dragStartX, dragStartY, dragging;\r\nvar _audioManager = undefined;\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\r\n\tinitPoppsJS();\r\n});\r\n\r\nfunction initPoppsJS() {\r\n\twindowWidth = window.innerWidth;\r\n\twindowHeight = window.innerHeight;\r\n\tstartTime = new Date();\r\n\r\n\tif (typeof preload === \"function\" && typeof setup === \"function\") {\r\n\t\tpreloading = true;\r\n\t\tpreload();\r\n\t\tpreloadInterval = setInterval(function () {\r\n\t\t\tif (itemsLoaded == preloadCounter) {\r\n\t\t\t\tpreloading = false;\r\n\t\t\t\tclearInterval(preloadInterval);\r\n\t\t\t\tstartPoppsJs();\r\n\t\t\t}\r\n\t\t}, 10);\r\n\t}\r\n\telse if (typeof setup === \"function\") {\r\n\t\tstartPoppsJs();\r\n\t}\r\n}\r\n\r\nfunction startPoppsJs() {\r\n\tlisteners();\r\n\tsetup();\r\n}\r\n\r\nclass Listener {\r\n\tconstructor(callbackFunc) {\r\n\t\tthis.callback = callbackFunc;\r\n\t}\r\n\tevent() {\r\n\t\tthis.callback();\r\n\t}\r\n}\r\n\r\nclass MouseListener extends Listener {\r\n\tconstructor(callbackFunc, canvas) {\r\n\t\tsuper(callbackFunc);\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.mouseX = 0;\r\n\t\tthis.mouseY = 0;\r\n\t\tthis.mouseDown = false;\r\n\r\n\t\tthis.mouseMovedCallback;\r\n\t\tthis.mouseClickedCallback;\r\n\t\tthis.mouseDraggedCallback;\r\n\t\tthis.mouseUpCallback;\r\n\t\tthis.mouseDownCallback;\r\n\t}\r\n\r\n\tlistenTo(eventType, callback) {\r\n\t\tswitch(eventType) {\r\n\t\t\tcase 'move':\r\n\t\t\t\tthis.canvas.addEventListener(\"mousemove\", function (event) { this.mouseMovedEvent(event); });\r\n\t\t\t\tthis.mouseMovedCallback = callback;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'click':\r\n\t\t\t\tthis.canvas.addEventListener(\"click\", function (event) { this.mouseClickedEvent(event); });\r\n\t\t\t\tthis.mouseClickedCallback = callback;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'drag':\r\n\t\t\t\tthis.canvas.addEventListener(\"mousedown\", function (event) { this.mouseDownEvent(event); });\r\n\t\t\t\tthis.canvas.addEventListener(\"mousemove\", function (event) { this.mouseDraggedEvent(event); });\r\n\t\t\t\tthis.mouseDraggedCallback = callback;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mouseup':\r\n\t\t\t\tthis.canvas.addEventListener(\"mouseup\", function (event) { this.mouseUpEvent(event); });\r\n\t\t\t\tthis.mouseUpCallback = callback;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mousedown':\r\n\t\t\t\tthis.canvas.addEventListener(\"mousedown\", function (event) { this.mouseDownEvent(event); });\r\n\t\t\t\tthis.mouseDownCallback = callback;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateMouseCoordinates(event) {\r\n\t\tmouseX = e.pageX - canvasX;\r\n\t\tmouseY = e.pageY - canvasY;\r\n\t}\r\n\r\n\tmouseMovedEvent(event) {\r\n\t\tupdateMouseCoordinates(event);\r\n\t\tthis.mouseMovedCallback();\r\n\t}\r\n\r\n\tmouseClickedEvent(event) {\r\n\t\tupdateMouseCoordinates(event);\r\n\t\tthis.mouseClickedCallback();\r\n\t}\r\n\r\n\tmouseDraggedEvent(event) {\r\n\t\tif(this.mouseDown) {\r\n\t\t\tupdateMouseCoordinates(event);\r\n\t\t\tthis.mouseDraggedCallback();\r\n\t\t}\r\n\t}\r\n\r\n\tmouseUpEvent(event) {\r\n\t\tupdateMouseCoordinates(event);\r\n\t\tthis.mouseDown = false;\r\n\t\tthis.mouseUpCallback();\r\n\t}\r\n\r\n\tmouseDownEvent(event) {\r\n\t\tupdateMouseCoordinates(event);\r\n\t\tthis.mouseDown = true;\r\n\t\tthis.mouseDownCallback();\r\n\t}\r\n}\r\n\r\nfunction listeners() {\r\n\tif (typeof mouseDown === 'function') {\r\n\t\tdocument.addEventListener(\"mousedown\", function (e) { mouseDownListener(e); });\r\n\t}\r\n\tif (typeof mouseUp === 'function') {\r\n\t\tdocument.addEventListener(\"mouseup\", function (e) { mouseUpListener(e); });\r\n\t}\r\n\tif (typeof mouseMoved === 'function') {\r\n\t\tdocument.addEventListener(\"mousemove\", function (e) { mouseMovedListener(e); });\r\n\t}\r\n\tif (typeof mouseClicked === 'function') {\r\n\t\tdocument.addEventListener(\"click\", function (e) { mouseClickedListener(e); });\r\n\t}\r\n\tif (typeof mouseDragged === 'function') {\r\n\t\tdocument.addEventListener(\"mousedown\", function (e) {\r\n\t\t\tdragStartX = event.pageX;\r\n\t\t\tdragStartY = event.pageY;\r\n\t\t\tmouseIsDown = true;\r\n\t\t});\r\n\t\tdocument.addEventListener(\"mousemove\", function (e) {\r\n\t\t\tif (mouseIsDown && abs(dragStartX - event.pageX) > DRAG_DISTANCE_THRESHOLD && abs(dragStartY - event.pageY) > DRAG_DISTANCE_THRESHOLD) {\r\n\t\t\t\tdragging = true;\r\n\t\t\t}\r\n\t\t\tif (dragging) {\r\n\t\t\t\tmouseDraggedListener(e);\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.addEventListener(\"mouseup\", function () {\r\n\t\t\tmouseIsDown = false;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tdragging = false;\r\n\t\t\t}, 10);\r\n\t\t});\r\n\t}\r\n\r\n\tif (typeof keyPressed === 'function') {\r\n\t\tdocument.addEventListener(\"keypress\", function (e) { keyPressedListener(e); });\r\n\t}\r\n\tif (typeof keyDown === 'function') {\r\n\t\tdocument.addEventListener(\"keydown\", function (e) { keyDownListener(e); });\r\n\t\tdocument.addEventListener(\"keyup\", function (e) { removeKey(e.key); });\r\n\t}\r\n\tif (typeof keyUp === 'function') {\r\n\t\tdocument.addEventListener(\"keyup\", function (e) { keyUpListener(e); });\r\n\t}\r\n\r\n\tif (typeof windowResized === 'function') {\r\n\t\twindow.addEventListener(\"resize\", windowResizedListener);\r\n\t}\r\n}\r\n\r\nfunction updateMouseCoords(e) {\r\n\tmouseX = e.pageX - canvasX;\r\n\tmouseY = e.pageY - canvasY;\r\n}\r\n\r\nfunction mouseMovedListener(e) {\r\n\tupdateMouseCoords(e);\r\n\tmouseMoved(e);\r\n}\r\n\r\nfunction mouseClickedListener(e) {\r\n\tif (!dragging) {\r\n\t\tupdateMouseCoords(e)\r\n\t\tmouseClicked(e);\r\n\t}\r\n}\r\n\r\nfunction mouseDownListener(e) {\r\n\tmouseIsDown = true;\r\n\tupdateMouseCoords(e);\r\n\tmouseDown(e);\r\n}\r\n\r\nfunction mouseUpListener(e) {\r\n\tmouseIsDown = false;\r\n\tupdateMouseCoords(e);\r\n\tmouseUp(e);\r\n}\r\n\r\nfunction mouseDraggedListener(e) {\r\n\tupdateMouseCoords(e);\r\n\tmouseDragged(e);\r\n}\r\n\r\nfunction updateKeys(e) {\r\n\tkey = e.key;\r\n\tkeycode = e.keyCode;\r\n}\r\n\r\nfunction addKey(k) {\r\n\tif(keycode == 16){\r\n\t\tshifting = true;\r\n\t}\r\n\telse {\r\n\t\tk = k.toLowerCase();\r\n\t\tif (keys.indexOf(k) == -1 && k.length == 1) {\r\n\t\t\tkeys.push(k);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction removeKey(k) {\r\n\tif(keycode == 16){\r\n\t\tshifting = false;\r\n\t}\r\n\telse{\r\n\t\tk = k.toLowerCase();\r\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\r\n\t\t\tif (keys[i] == k) keys.splice(i, 1);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction keyPressedListener(e) {\r\n\tupdateKeys(e);\r\n\tkeyPressed(e);\r\n}\r\n\r\nfunction keyDownListener(e) {\r\n\tupdateKeys(e);\r\n\taddKey(e.key);\r\n\tkeyDown(e);\r\n}\r\n\r\nfunction keyUpListener(e) {\r\n\tupdateKeys(e);\r\n\tremoveKey(e.key);\r\n\tkeyUp(e);\r\n}\r\n\r\nfunction keyIsDown(k) {\r\n\tfor (let key of keys) {\r\n\t\tif (k == key) return true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction windowResizedListener() {\r\n\twindowWidth = window.innerWidth;\r\n\twindowHeight = window.innerHeight;\r\n\twindowResized();\r\n}\r\n\r\nfunction loop(f) {\r\n\tlooping = true;\r\n\tframeCount = 0;\r\n\tif (f) {\r\n\t\tframeRate = f;\r\n\t\tframeTime = 1000 / f;\r\n\t}\r\n\trequestAnimationFrame(frameUpdate);\r\n}\r\n\r\nfunction noLoop() {\r\n\tlooping = false;\r\n}\r\n\r\nfunction frameUpdate() {\r\n\tif (looping) {\r\n\t\trequestAnimationFrame(frameUpdate);\r\n\r\n\t\tif (frameRate && millis() - lastFrameTime > frameTime) {\r\n\t\t\tframeCount++;\r\n\t\t\tdraw();\r\n\t\t}\r\n\t\telse if (frameRate === undefined) {\r\n\t\t\tframeCount++;\r\n\t\t\tdraw();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction millis() {\r\n\tvar endTime = new Date();\r\n\treturn endTime - startTime;\r\n}\r\n\r\nfunction createCanvas(w, h, parent) {\r\n\tif (parent) {\r\n\t\tcanvasElement = document.getElementById(\"\" + parent);\r\n\t}\r\n\telse {\r\n\t\tcanvasElement = document.createElement(\"canvas\");\r\n\t\tdocument.getElementsByTagName(\"BODY\")[0].append(canvasElement);\r\n\t}\r\n\tcanvas = canvasElement.getContext(\"2d\");\r\n\tcanvas.canvas.width = w;\r\n\tcanvas.canvas.height = h;\r\n\twidth = w;\r\n\theight = h;\r\n\tvar r = canvasElement.getBoundingClientRect();\r\n\t// var scrollTop = document.documentElement.scrollTop ?\r\n\t// \tdocument.documentElement.scrollTop : document.body.scrollTop;\r\n\t// var scrollLeft = document.documentElement.scrollLeft ?\r\n\t// \tdocument.documentElement.scrollLeft : document.body.scrollLeft;\r\n\tcanvasX = r.left;\r\n\tcanvasY = r.top;\r\n\r\n\twindow.addEventListener(\"scroll\", function (event) {\r\n\t\tvar r = canvasElement.getBoundingClientRect();\r\n\t\tscrollTop = document.documentElement.scrollTop ?\r\n\t\t\tdocument.documentElement.scrollTop : document.body.scrollTop;\r\n\t\tscrollLeft = document.documentElement.scrollLeft ?\r\n\t\t\tdocument.documentElement.scrollLeft : document.body.scrollLeft;\r\n\t\tcanvasX = r.left + scrollLeft;\r\n\t\tcanvasY = r.top + scrollTop;\r\n\t});\r\n\treturn canvas;\r\n}\r\n\r\nfunction createInvisibleCanvas() {\r\n\tif (invisCanvas == undefined) {\r\n\t\tinvisibleCanvasElement = document.createElement(\"canvas\");\r\n\t\tinvisCanvas = invisibleCanvasElement.getContext(\"2d\");\r\n\t\tinvisCanvas.canvas.width = 0;\r\n\t\tinvisCanvas.canvas.height = 0;\r\n\t\treturn invisibleCanvasElement;\r\n\t}\r\n}\r\n\r\nfunction resizeCanvas(w, h) {\r\n\tcanvas.canvas.width = w;\r\n\tcanvas.canvas.height = h;\r\n\twidth = w;\r\n\theight = h;\r\n}\r\n\r\nfunction resizeInvisibleCanvas(w, h) {\r\n\tif (invisCanvas != undefined) {\r\n\t\tinvisCanvas.canvas.width = w;\r\n\t\tinvisCanvas.canvas.height = h;\r\n\t\tinvisibleCanvasElement.style.width = w;\r\n\t\tinvisibleCanvasElement.style.height = h;\r\n\t}\r\n}\r\n\r\nfunction fill(r, g, b, a) {\r\n\tvar f = \"rgb\";\r\n\tif (r === undefined) {\r\n\t\tf += \"(0,0,0)\";\r\n\t\tcanvas.fillStyle = f;\r\n\t\treturn;\r\n\t}\r\n\tr = Math.round(r);\r\n\tif (g === undefined) {\r\n\t\tf += \"(\" + r + \",\" + r + \",\" + r + \")\";\r\n\t\tcanvas.fillStyle = f;\r\n\t\treturn;\r\n\t}\r\n\tg = Math.round(g);\r\n\tb = Math.round(b);\r\n\tif (a === undefined) {\r\n\t\tf += \"(\" + r + \",\" + g + \",\" + b + \")\";\r\n\t\tcanvas.fillStyle = f;\r\n\t\treturn;\r\n\t}\r\n\tf += \"a(\" + r + \",\" + g + \",\" + b + \",\" + a;\r\n\tcanvas.fillStyle = f;\r\n\treturn;\r\n}\r\n\r\nfunction stroke(r, g, b, a) {\r\n\tvar f = \"rgb\";\r\n\tif (r === undefined) {\r\n\t\tf += \"(0,0,0)\";\r\n\t\tcanvas.strokeStyle = f;\r\n\t\treturn;\r\n\t}\r\n\tr = Math.round(r);\r\n\tif (g === undefined) {\r\n\t\tf += \"(\" + r + \",\" + r + \",\" + r + \")\";\r\n\t\tcanvas.strokeStyle = f;\r\n\t\treturn;\r\n\t}\r\n\tg = Math.round(g);\r\n\tb = Math.round(b);\r\n\tif (a === undefined) {\r\n\t\tf += \"(\" + r + \",\" + g + \",\" + b + \")\";\r\n\t\tcanvas.strokeStyle = f;\r\n\t\treturn;\r\n\t}\r\n\tf += \"a(\" + r + \",\" + g + \",\" + b + \",\" + a;\r\n\tcanvas.strokeStyle = f;\r\n\treturn;\r\n}\r\n\r\nfunction strokeWidth(w) {\r\n\tcanvas.lineWidth = w;\r\n}\r\n\r\nfunction noStroke() {\r\n\tcanvas.strokeStyle = \"transparent\";\r\n}\r\n\r\nfunction font(f) {\r\n\tfont = f;\r\n\tcanvas.font = \"\" + fontSize + font;\r\n}\r\n\r\nfunction fontSize(s) {\r\n\tfontSize = s;\r\n\tcanvas.font = \"\" + fontSize + font;\r\n}\r\n\r\nfunction background(r, g, b, a) {\r\n\tvar t = canvas.fillStyle;\r\n\tfill(r, g, b, a);\r\n\tcanvas.beginPath();\r\n\tcanvas.rect(0, 0, width, height);\r\n\tcanvas.fill();\r\n\tcanvas.fillStyle = t;\r\n}\r\n\r\nfunction clearBackground() {\r\n\tcanvas.clearRect(0, 0, width, height);\r\n}\r\n\r\nfunction rect(x1, y1, x2, y2) {\r\n\tcanvas.beginPath();\r\n\tcanvas.rect(x1, y1, x2, y2);\r\n\tcanvas.fill();\r\n}\r\n\r\nfunction strokeRect(x1, y1, x2, y2) {\r\n\tcanvas.beginPath();\r\n\tcanvas.rect(x1, y1, x2, y2);\r\n\tcanvas.stroke();\r\n}\r\n\r\nfunction line(x1, y1, x2, y2, w) {\r\n\tcanvas.beginPath();\r\n\tcanvas.moveTo(x1, y1);\r\n\tcanvas.lineTo(x2, y2);\r\n\tif (w) {\r\n\t\tvar t = canvas.lineWidth;\r\n\t\tstrokeWidth(w);\r\n\t\tcanvas.stroke();\r\n\t\tstrokeWidth(t);\r\n\t}\r\n\telse {\r\n\t\tcanvas.stroke();\r\n\t}\r\n}\r\n\r\nfunction ellipse(x, y, r) {\r\n\tcanvas.beginPath();\r\n\tif (r) {\r\n\t\tcanvas.arc(x, y, r, 0, 2 * Math.PI);\r\n\t}\r\n\telse {\r\n\t\tcanvas.arc(x, y, 1, 0, 2 * Math.PI);\r\n\t}\r\n\tcanvas.fill();\r\n}\r\n\r\nfunction strokeEllipse(x, y, r) {\r\n\tcanvas.beginPath();\r\n\tif (r) {\r\n\t\tcanvas.arc(x, y, r, 0, 2 * Math.PI);\r\n\t}\r\n\telse {\r\n\t\tcanvas.arc(x, y, 1, 0, 2 * Math.PI);\r\n\t}\r\n\tcanvas.stroke();\r\n}\r\n\r\nfunction arc(x, y, r, startAngle, endAngle, ant) {\r\n\tcanvas.beginPath();\r\n\tif (ant) {\r\n\t\tcanvas.arc(x, y, r, startAngle, endAngle, true);\r\n\t}\r\n\telse {\r\n\t\tcanvas.arc(x, y, r, startAngle, endAngle);\r\n\t}\r\n\tcanvas.fill();\r\n}\r\n\r\nfunction strokeArc(x, y, r, startAngle, endAngle, ant) {\r\n\tcanvas.beginPath();\r\n\tif (ant) {\r\n\t\tcanvas.arc(x, y, r, startAngle, endAngle, true);\r\n\t}\r\n\telse {\r\n\t\tcanvas.arc(x, y, r, startAngle, endAngle);\r\n\t}\r\n\tcanvas.stroke();\r\n}\r\n\r\nfunction point(x, y, r) {\r\n\tcanvas.beginPath();\r\n\tif (r) {\r\n\t\tcanvas.arc(x, y, r, 0, 2 * Math.PI);\r\n\t}\r\n\telse {\r\n\t\tcanvas.arc(x, y, 1, 0, 2 * Math.PI);\r\n\t}\r\n\tcanvas.fill();\r\n}\r\n\r\nfunction strokePoint(x, y, r) {\r\n\tcanvas.beginPath();\r\n\tif (r) {\r\n\t\tcanvas.arc(x, y, r, 0, 2 * Math.PI);\r\n\t}\r\n\telse {\r\n\t\tcanvas.arc(x, y, 1, 0, 2 * Math.PI);\r\n\t}\r\n\tcanvas.stroke();\r\n}\r\n\r\nfunction text(t, x, y) {\r\n\tcanvas.fillText(t, x, y);\r\n}\r\n\r\nfunction strokeText(t, x, y) {\r\n\tcanvas.strokeText(t, x, y);\r\n}\r\n\r\nfunction image(img, sx, sy, sWidth, sHeight, x, y, width, height) {\r\n\tif (img != undefined) {\r\n\t\tif (sWidth === undefined) {\r\n\t\t\tcanvas.drawImage(img, sx, sy);\r\n\t\t}\r\n\t\telse if (x === undefined) {\r\n\t\t\tcanvas.drawImage(img, sx, sy, sWidth, sHeight);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcanvas.drawImage(img, sx, sy, sWidth, sHeight, x, y, width, height);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// -------------------------------   Data Structures   -------------------------------\r\n\r\npreloadCounter = 0;\r\nitemsLoaded = 0;\r\n\r\nfunction loadJSON(path) {\r\n\tif (preloading) preloadCounter++;\r\n\tvar req = new XMLHttpRequest();\r\n\treq.overrideMimeType(\"application/json\");\r\n\treq.open('GET', path, false);\r\n\treq.send(null);\r\n\tif (req.readyState == 4 && req.status == \"200\") {\r\n\t\tif (preloading) {\r\n\t\t\titemsLoaded++;\r\n\t\t}\r\n\t\treturn JSON.parse(req.responseText);\r\n\t} else {\r\n\t\tconsole.log(\"Error loading JSON\");\r\n\t}\r\n}\r\n\r\nfunction loadImage(url) {\r\n\tif (preloading) preloadCounter++;\r\n\tlet img = new Image();\r\n\tif (preloading) {\r\n\t\timg.onload = function () {\r\n\t\t\titemsLoaded++;\r\n\t\t}\r\n\t}\r\n\timg.src = url;\r\n\treturn img;\r\n}\r\n\r\nfunction getCropped(img, sx, sy, width, height) {\r\n\tcreateInvisibleCanvas();\r\n\tresizeInvisibleCanvas(width, height);\r\n\tinvisCanvas.drawImage(img, sx, sy, width, height, 0, 0, width, height);\r\n\treturn loadImage(invisibleCanvasElement.toDataURL());\r\n}\r\n\r\nfunction loadAudio(src) {\r\n\tif (_audioManager == undefined) initializeAudio();\r\n\treturn new PoppsSoundBuffer(src);\r\n}\r\n\r\n// function\r\n\r\nfunction initializeAudio() {\r\n\t_audioManager = new PoppsAudioManager();\r\n}\r\n\r\nfunction loadBuffer(src, pointer) {\r\n\tlet request = new XMLHttpRequest();\r\n\trequest.open('GET', src, true);\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function () {\r\n\t\t_audioManager.audioContext.decodeAudioData(\r\n\t\t\trequest.response,\r\n\t\t\tfunction (buffer) {\r\n\t\t\t\tpointer.ready = true;\r\n\t\t\t\tpointer.buffer = buffer;\r\n\t\t\t\t// pointer.onload();\r\n\t\t\t\t_audioManager.sounds.push(pointer);\r\n\t\t\t},\r\n\t\t\tfunction (e) {\r\n\t\t\t\tconsole.log(\"Fail\");\r\n\t\t\t}\r\n\t\t)\r\n\t}\r\n\trequest.send();\r\n}\r\n\r\nfunction PoppsAudioManager() {\r\n\tthis.sounds = [];\r\n\tthis.activeSounds = [];\r\n\tthis.audioContext = new AudioContext();\r\n}\r\n\r\nfunction playSound(poppsSoundBuffer, delay, startPoint, duration) {\r\n\treturn new PoppsSound(poppsSoundBuffer, delay, startPoint, duration);\r\n}\r\n\r\nfunction stopAllSounds() {\r\n\tfor (let s of _audioManager.activeSounds) {\r\n\t\ts.stop();\r\n\t}\r\n\t_audioManager.activeSounds = [];\r\n}\r\n\r\nfunction PoppsSoundBuffer(src) {\r\n\tthis.ready = false;\r\n\tloadBuffer(src, this);\r\n}\r\n\r\nfunction PoppsSound(poppsSoundBuffer, delay, startPoint, duration) {\r\n\tthis.playing = true;\r\n\tthis.loops = false;\r\n\tthis.sound = _audioManager.audioContext.createBufferSource();\r\n\tif (poppsSoundBuffer.ready) {\r\n\t\tthis.init(poppsSoundBuffer, delay, startPoint, duration);\r\n\t}\r\n\telse {\r\n\t\tlet bufferCheckInterval = setInterval(() => {\r\n\t\t\tif (poppsSoundBuffer.ready) {\r\n\t\t\t\tclearInterval(bufferCheckInterval);\r\n\t\t\t\tbufferCheckInterval = undefined;\r\n\t\t\t\tthis.init(poppsSoundBuffer, delay, startPoint, duration);\r\n\t\t\t}\r\n\t\t}, 10);\r\n\t}\r\n\r\n\tthis.sound.onended = function () {\r\n\t\tthis.delete();\r\n\t}.bind(this);\r\n}\r\n\r\nPoppsSound.prototype.init = function (poppsSoundBuffer, delay, startPoint, duration) {\r\n\tthis.sound.buffer = poppsSoundBuffer.buffer;\r\n\tthis.sound.connect(_audioManager.audioContext.destination);\r\n\tthis.sound.start(delay, startPoint, duration);\r\n\t_audioManager.activeSounds.push(this);\r\n}\r\n\r\nPoppsSound.prototype.volume = function (vol) {\r\n\tthis.sound.volume = vol;\r\n}\r\n\r\nPoppsSound.prototype.loop = function () {\r\n\tthis.loops = true;\r\n\tthis.sound.loop = true;\r\n}\r\n\r\nPoppsSound.prototype.noloop = function () {\r\n\tthis.loops = true;\r\n\tthis.sound.loop = false;\r\n}\r\n\r\nPoppsSound.prototype.stop = function () {\r\n\tthis.sound.stop()\r\n\tthis.sound.disconnect();\r\n\t_audioManager.activeSounds.splice(_audioManager.activeSounds.indexOf(this), 1);\r\n\tthis.delete();\r\n}\r\n\r\nPoppsSound.prototype.pauseSound = function () {\r\n\tif (this.playing) {\r\n\t\tthis.sound.disconnect();\r\n\t\tthis.playing = false;\r\n\t}\r\n}\r\n\r\nPoppsSound.prototype.resumeSound = function () {\r\n\tif (!this.playing) {\r\n\t\tthis.sound.connect(_audioManager.audioContext.destination);\r\n\t\t// this.audio.start();\r\n\t\tthis.playing = true;\r\n\t}\r\n}\r\n\r\nPoppsSound.prototype.delete = function () {\r\n\tthis.ended();\r\n\t_audioManager.activeSounds.splice(_audioManager.activeSounds.indexOf(this), 1);\r\n\tdelete this.playing;\r\n\tdelete this.sound;\r\n\t_delete(this);\r\n}\r\n\r\nPoppsSound.prototype.ended = function () { };\r\n\r\n\r\nfunction createVector(val1, val2) {\r\n\tif (val1 && val2) {\r\n\t\treturn new PoppsVector(val1, val2);\r\n\t}\r\n\telse if (val1) {\r\n\t\treturn new PoppsVector(val1, 0);\r\n\t}\r\n\telse {\r\n\t\treturn new PoppsVector(0, 0);\r\n\t}\r\n}\r\n\r\nclass PoppsVector {\r\n\r\n\tconstructor(x, y) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t}\r\n\r\n\tset(x, y) {\r\n\t\tif (y) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\t\telse if (x) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tmult(v2) {\r\n\t\tif (typeof v2 === 'number') {\r\n\t\t\tthis.x *= v2;\r\n\t\t\tthis.y *= v2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x *= v2.x;\r\n\t\t\tthis.y *= v2.y;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tdiv(v2) {\r\n\t\tif (typeof v2 === 'number') {\r\n\t\t\tthis.x *= v2;\r\n\t\t\tthis.y *= v2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x *= v2.x;\r\n\t\t\tthis.y *= v2.y;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tadd(v2) {\r\n\t\tif (typeof v2 === 'number') {\r\n\t\t\tthis.x += v2;\r\n\t\t\tthis.y += v2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x += v2.x;\r\n\t\t\tthis.y += v2.y;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsub(v2) {\r\n\t\tif (typeof v2 === 'number') {\r\n\t\t\tthis.x -= v2;\r\n\t\t\tthis.y -= v2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x -= v2.x;\r\n\t\t\tthis.y -= v2.y;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\nfunction applyForces(pos, vel, acc) {\r\n\tpos.add(vel);\r\n\tvel.add(acc);\r\n}\r\n\r\n// -------------------------------   Math   -------------------------------\r\n\r\nfunction abs(val) {\r\n\treturn Math.abs(val);\r\n}\r\n\r\nfunction dist(x1, y1, x2, y2) {\r\n\treturn Math.sqrt(((x2 - x1) * (x2 - x1)) + ((y2 - y1) * (y2 - y1)));\r\n}\r\n\r\nfunction osc(val, center, amp, positive) {\r\n\tif (center === undefined) {\r\n\t\treturn Math.sin(val)\r\n\t}\r\n\tif (amp === undefined) {\r\n\t\treturn Math.sin(val) + center;\r\n\t}\r\n\tif (positive === undefined) {\r\n\t\treturn (Math.sin(val) * amp) + center;\r\n\t}\r\n\tif (positive === true) {\r\n\t\treturn (Math.abs(Math.sin(val)) * amp) + center;\r\n\t}\r\n\telse if (positive === false) {\r\n\t\treturn (-Math.abs(Math.sin(val)) * amp) + center;\r\n\t}\r\n}\r\n\r\nfunction oscSpeed(val, center, amp, speed, positive) {\r\n\tif (center === undefined) {\r\n\t\treturn Math.sin(val)\r\n\t}\r\n\tif (amp === undefined) {\r\n\t\treturn Math.sin(val) + center;\r\n\t}\r\n\tif (speed === undefined) {\r\n\t\treturn (Math.sin(val) * amp) + center;\r\n\t}\r\n\tif (positive === undefined) {\r\n\t\treturn (Math.sin(val * speed) * amp) + center;\r\n\t}\r\n\tif (positive === true) {\r\n\t\treturn (Math.abs(Math.sin(val * speed)) * amp) + center;\r\n\t}\r\n\telse if (positive === false) {\r\n\t\treturn (-Math.abs(Math.sin(val * speed)) * amp) + center;\r\n\t}\r\n}\r\n\r\nfunction random(low, high) {\r\n\tif (high) {\r\n\t\treturn map(Math.random(), 0, 1, low, high);\r\n\t}\r\n\tif (low) {\r\n\t\tif (Array.isArray(low)) {\r\n\t\t\treturn low[randomInt(low.length)];\r\n\t\t}\r\n\t\treturn Math.random() * low;\r\n\t}\r\n\treturn Math.random();\r\n}\r\n\r\nfunction randomInt(low = 0, high) {\r\n\tif (high) {\r\n\t\treturn floor(random(low, high));\r\n\t}\r\n\treturn floor(random(low));\r\n}\r\n\r\nfunction randomRound(amp, round) {\r\n\tif (amp === undefined) {\r\n\t\treturn Math.random();\r\n\t}\r\n\tif (round === undefined) {\r\n\t\treturn Math.random() * amp;\r\n\t}\r\n\tif (typeof round === 'string') {\r\n\t\treturn Math.floor(Math.random() * amp);\r\n\t}\r\n\tvar factor = Math.pow(10, round - 3);\r\n\treturn Math.floor((Math.random() * amp) * factor) / factor;\r\n}\r\n\r\nfunction oneIn(chance) {\r\n\treturn (1 > random(chance));\r\n}\r\n\r\nfunction fiftyFifty() {\r\n\treturn (random(1) < .5);\r\n}\r\n\r\nfunction map(val, low1, high1, low2, high2) {\r\n\tval = constrain(val, low1, high1);\r\n\tvar scale = (high2 - low2) / (high1 - low1);\r\n\tvar dif = low2 - low1;\r\n\treturn (val * scale) + dif;\r\n}\r\n\r\nfunction floor(val) {\r\n\treturn Math.floor(val);\r\n}\r\n\r\nfunction ceil(val) {\r\n\treturn Math.ceil(val);\r\n}\r\n\r\nfunction constrainLow(v, l) {\r\n\treturn Math.max(v, l);\r\n}\r\n\r\nfunction constrainHigh(v, h) {\r\n\treturn Math.min(v, h);\r\n}\r\n\r\nfunction min(v1, v2) {\r\n\treturn Math.min(v1, v2);\r\n}\r\n\r\nfunction max(v1, v2) {\r\n\treturn Math.max(v1, v2);\r\n}\r\n\r\nfunction constrain(v, l, h) {\r\n\treturn constrainHigh(constrainLow(v, l), h);\r\n}\r\n"]}